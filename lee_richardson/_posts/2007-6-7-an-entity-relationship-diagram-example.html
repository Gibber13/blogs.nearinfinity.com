--- 
permalink: /blogs/lee_richardson/an_entity_relationship_diagram_example.html
layout: blogs
title: An Entity Relationship Diagram Example
date: 2007-06-07 00:38:24 -04:00
tags: General SQL
---
{% raw %}
<p>It seems like a dying art, but I still strongly feel that Entity Relationship Diagrams (ERD) should be the starting point of all software development projects. Since they are for me anyway, I wanted a place to refer colleagues to for how to read these diagrams, and an Entity Relationship Diagram Example seemed like a great place to start.</p>
<div style="FLOAT: right; MARGIN-LEFT: 10px">
<script type="text/javascript">
        var currentPageUrl = 'http://rapidapplicationdevelopment.blogspot.com/2007/06/entity-relationship-diagram-example.html';

        /* Digg */
        var diggIframe = document.createElement('iframe');
        diggIframe.setAttribute('src', 'http://digg.com/tools/diggthis.php?u=' + currentPageUrl);
        diggIframe.setAttribute('height', '80');
        diggIframe.setAttribute('width', '52');
        diggIframe.setAttribute('frameborder', '0');
        diggIframe.setAttribute('scrolling', 'no');
        diggIframe.setAttribute('style', 'margin-left:auto; margin-right:auto; display:block; text-align:center;');

        /* DotNetKicks */
        var dotnetkicksLink = document.createElement('a');
        dotnetkicksLink.setAttribute('href', 'http://www.dotnetkicks.com/kick/?url=' + currentPageUrl);
        var dotnetkicksImg = document.createElement('img');
        dotnetkicksImg.setAttribute('src', 'http://www.dotnetkicks.com/Services/Images/KickItImageGenerator.ashx?url=' + currentPageUrl);
        dotnetkicksImg.setAttribute('alt', 'Kick this article (a good thing) on DotNetKicks');
        dotnetkicksImg.setAttribute('border', '0');
        dotnetkicksImg.setAttribute('style', 'margin-left:auto; margin-right:auto; display:block; text-align:center;');
        dotnetkicksLink.appendChild(dotnetkicksImg);

        var div = document.createElement('div');
        div.appendChild(diggIframe);
        div.appendChild(document.createElement('br'));
        div.appendChild(dotnetkicksLink);

        document.write(div.innerHTML);
    </script>
</div>
<p><b>The Example: A Resource Management Application</b></p>
<p>Consider that we're writing a resource management application. The first step to creating an ERD is always to identify the nouns (entities). In this case let's start with:</p>
<p>
<ul>
<li>Company</li>
<li>Employee </li>
<li>Project; and </li>
<li>Technology Project (which are a specific type of Project that perhaps require special fields like "number of entities")</li></ul>
<p></p>
<p>Here's the Example Entity Relationship Diagram I'll decipher piece by piece in this article (click to enlarge):</p>
<p><a href="http://bp3.blogger.com/_gez10dNhuPk/Rmdg-XjZyjI/AAAAAAAAAH0/sn94SwOFWO4/s1600-h/01-ErdExample.gif"><img id="BLOGGER_PHOTO_ID_5073130129846815282" style="CURSOR: hand" alt="" src="http://bp3.blogger.com/_gez10dNhuPk/Rmdg-XjZyjI/AAAAAAAAAH0/sn94SwOFWO4/s400/01-ErdExample.gif" border="0" /></a></p>
<p>(note that I'm now using singular names since my somewhat controversial decision to switch to <a href="http://rapidapplicationdevelopment.blogspot.com/2007/03/entity-naming-conventions.html" target="">naming entities in the singular</a>)</p>
<p><b>To read the notations of an Entity Relationship Diagram:</b></p>
<p>An Entity Relationship Diagram conveys a lot of information with a very concise notation. The important part to keep in mind is to limit what you're reading using the following technique:</p>
<p>
<ol>
<li>Choose two entities (e.g. Company and Employee) </li>
<li>Pick one that you're interested in (e.g. how <b>a single Company</b> relates to employees)</li>
<li>Read the notation on the second entity (e.g. the crow's feet with the O above it next to the Employee entity). </li></ol>
<p></p>
<p>The set of symbols consist of Crow's feet (which <a href="http://en.wikipedia.org/wiki/Entity-relationship_model#Crow.27s_Feet" target="_blank">Wikipedia</a> describes as looking like the forward digits of a bird's claw), O, and dash, but they can be combined in four distinct combinations. Here are the four combinations:</p>
<p>
<ul>
<li>Zero through Many (crow's feet, O)</li>
<li>One through Many (crow's feet, dash)</li>
<li>One and Only One (dash, dash)</li>
<li>Zero or One (dash, O)</li></ul>
<p></p>
<p><b>Zero through Many</b></p>
<p><a href="http://bp1.blogger.com/_gez10dNhuPk/RmeNA3jZyqI/AAAAAAAAAIs/2qnhtwSfqDc/s1600-h/02-ZeroThroughMany.gif"><img id="BLOGGER_PHOTO_ID_5073178551308110498" style="CURSOR: hand" alt="" src="http://bp1.blogger.com/_gez10dNhuPk/RmeNA3jZyqI/AAAAAAAAAIs/2qnhtwSfqDc/s400/02-ZeroThroughMany.gif" border="0" /></a></p>
<p>If, as in the diagram above, the notation closest to the second entity is a crow's feet with an O next to it, then the first entity can have zero, one, or many of the second entity. Consequently the diagram above would read: "A company can have zero, one, or many employees".</p>
<p>This is the most common relationship type, and consequently many people ignore the O. While you can consider the O optional, I consider it a best practice to be explicit to differentiate it from the less common one through many relationship.</p>
<p><b>One through Many</b></p>
<p><a href="http://bp0.blogger.com/_gez10dNhuPk/Rmdg-njZylI/AAAAAAAAAIE/xLc99gOFKvQ/s1600-h/03-OneThroughMany.gif"><img id="Img2" style="CURSOR: hand" alt="" src="http://bp0.blogger.com/_gez10dNhuPk/Rmdg-njZylI/AAAAAAAAAIE/xLc99gOFKvQ/s400/03-OneThroughMany.gif" border="0" /></a></p>
<p>If, as the next diagram shows, the notation closest to the second entity is a crow's feet with a dash, then the first entity can have one through many of the second entity. More specifically it may not contain zero of the second entity. The example above would thus read (read bottom to top): "A Project can have one through many Employees working on it."</p>
<p>This is an interesting combination because it can't (and for various reasons probably shouldn't if it could) be enforced by a database. Thus, you will only see these in logical, but not a physical, data models. It is still useful to distinguish, but your application will need to enforce the relationship in business rules.</p>
<p><b>One and Only One (onne)</b></p>
<p><a href="http://bp1.blogger.com/_gez10dNhuPk/Rmdg-3jZymI/AAAAAAAAAIM/v6ISuqqp3R8/s1600-h/04-OneAndOnlyOne.gif"><img id="Img3" style="CURSOR: hand" alt="" src="http://bp1.blogger.com/_gez10dNhuPk/Rmdg-3jZymI/AAAAAAAAAIM/v6ISuqqp3R8/s400/04-OneAndOnlyOne.gif" border="0" /></a></p>
<p>If the notation closest to the second entity contains two dashes it indicates that the first entity can have one and only one of the second. More specifically it cannot have zero, and it cannot have more than one. The example would thus read: "An Employee can have one and only one Company."</p>
<p>This combination is the most common after zero through many, and so frequently people consider the second dash optional. In fact, some ignore both dashes, but I would highly recommend at least using one for clarity so as not to confuse the notation with "I'll fill in the relationship details later".</p>
<p><b>Zero or One</b></p>
<p><a href="http://bp1.blogger.com/_gez10dNhuPk/Rmdg-3jZynI/AAAAAAAAAIU/e3XGZU-69Uk/s1600-h/05-ZeroOrOne.gif"><img id="Img4" style="CURSOR: hand" alt="" src="http://bp1.blogger.com/_gez10dNhuPk/Rmdg-3jZynI/AAAAAAAAAIU/e3XGZU-69Uk/s400/05-ZeroOrOne.gif" border="0" /></a></p>
<p>A zero or one relationship is indicated by a dash and an O. It indicates that the first entity can have zero or one of the second, but not more than one. The relationship in the example above would thus read: "A Project can have zero or one Technology Project."</p>
<p>The zero or one relationship is quite common and is frequently abbreviated with just an O (however it is most commonly seen in a many-to-many relationship rather than the one-to-one above, more on this later).</p>
<p><b>Relationship Types</b></p>
<p>Having examined the four types of notation, the discussion wouldn't be complete without a quick overview of the three relationship types. These are:</p>
<p>
<ul>
<li>One to Many</li>
<li>Many to Many</li>
<li>One to One</li></ul>
<p></p>
<p><b>One-to-Many</b></p>
<p>A one-to-many (1N) is by far the most common relationship type. It consists of either a <i>one through many</i> or a <i>zero through many</i> notation on one side of a relationship and a <i>one and only one</i> or <i>zero or one</i> notation on the other. The relationship between Company and Employee in the example is a one-to-many relationship.</p>
<p><b>Many-to-Many</b></p>
<p>The next most common relationship is a many-to-many (NM). It consists of a zero through many or one through many on both sides of a relationship. This construct only exists in logical data models because databases can't implement the relationship directly. Physical data models implement a many-to-many relationship by using an associative (or link or resolving) table via two one-to-many relationships.</p>
<p>The relationship between Employee and Project in the example is a many to many relationship. It would exist in logical and physical data models as follows:</p>
<p><a href="http://bp3.blogger.com/_gez10dNhuPk/RmdhGXjZyoI/AAAAAAAAAIc/MheEUX8GMDc/s1600-h/06-Many-To-Many.gif"><img id="Img5" style="CURSOR: hand" alt="" src="http://bp3.blogger.com/_gez10dNhuPk/RmdhGXjZyoI/AAAAAAAAAIc/MheEUX8GMDc/s400/06-Many-To-Many.gif" border="0" /></a></p>
<p><b>One-to-One</b></p>
<p>Probably the least common and most misunderstood relationship is the one-to-one. It consists of a one and only one notation on one side of a relationship and a zero or one on the other. It warrants a discussion unto itself, but for now the Project to Technology Project relationship in the example is a one to one. Because these relationships are easy to mistake for traditional one-to-many relationships, I have taken to drawing a red dashed line around them. The red dashed line is not standard at all (although a colleague, Steve Dempsey uses a similar notation), but in my experience it can help eliminate confusion.</p>
<p><a href="http://bp1.blogger.com/_gez10dNhuPk/Rmdms3jZypI/AAAAAAAAAIk/XLcplhldx3M/s1600-h/07-One-To-One.gif"><img id="BLOGGER_PHOTO_ID_5073136426268871314" style="CURSOR: hand" alt="" src="http://bp1.blogger.com/_gez10dNhuPk/Rmdms3jZypI/AAAAAAAAAIk/XLcplhldx3M/s400/07-One-To-One.gif" border="0" /></a> </p>
<p><b>Conclusion</b></p>
<p>I hope you've found this a useful example for deciphering and verifying entity relationship diagrams. As always please add any comments, disagreements, thoughts or related resources.</p> 
{% endraw %}
