---
atom_id: tag:www.nearinfinity.com,2007:/blogs//36.1583 # This is for backwards compatibility do not change!
permalink: /blogs/jim_clark/introduction_to_pdf_techbook.html
layout: blogs
title: Introduction to PDF::TechBook
date: 2007-04-30 22:44:39 -04:00
tags: Ruby
---
<p>
Recently I had an interest in producing PDF documents using Ruby on Rails.&nbsp;
A quick Google search brought me to a Ruby PDF library called
<a href="http://ruby-pdf.rubyforge.org/pdf-writer/" title="PDF::Writer for Ruby">PDF::Writer
for Ruby</a> written by
<a href="http://www.halostatue.ca/" title="Austin Ziegler">Austin
Ziegler</a>.&nbsp; As far as I can tell from the online manual PDF::Writer is a
fairly robust library.&nbsp; The manual was well written and
generated by PDF::Writer itself, very impressive.&nbsp; By reading Austin's
introductory
<a href="http://www.artima.com/rubycs/articles/pdf_writer.html" title="Artima article">PDF::Writer
article</a> I was able to get up and running quickly.&nbsp; The article
demonstrates creating text, tables, drawings and inserting images.&nbsp;
However, I didn't need to do anything fancy like create charts or drawings (see
the PACMAN example). &nbsp; All I wanted was some basic header, text and code
styling.&nbsp; Out of the box PDF::Writer allows you to do these sort of things
but it requires some additional work on your part.&nbsp; PDF::Writer gives you
the primitives to work with to create whatever you want, but I didn't have the
time to go through the effort to create my own styling from scratch.&nbsp;
Fortunately, Austin extended PDF::Writer to create PDF::TechBook.&nbsp;
TechBook gives you the ability to mark up and style your content that can then
be used to generate a PDF document.&nbsp; This is a brief introduction to
TechBook.
</p>

<p>
The TechBook class extends PDF::Writer and is an interpreter that interprets a lightweight markup language.&nbsp; You
feed the TechBook class a string or a file that contains content and TechBook
markup to generate a PDF document.&nbsp; TechBook markup provides styling for
basic headings, preformatted blocks, code sections, columns, table of contents,
bulleted lists and a few other items.&nbsp; I equate this to
something like an HTML-lite or textile for PDFs.&nbsp; The markup
uses directives to indicate the start and end of a block of text.&nbsp; Some
directives are line oriented like headers that only require a start
directive.&nbsp; Other directives can span multiple lines like bulleted
lists.&nbsp; We'll start with a basic example.&nbsp;
</p>

<p>
Headers, similar to the &lt;H1-5&gt; tags in HTML, are supported up to five
headers by using the somewhat awkward format <code>#&lt;heading-text&gt;</code>, e.g.
</p>{% highlight text %}    1&lt;Level 1&gt;
    2&lt;Level 2&gt;
    3&lt;Level 3&gt;
    4&lt;Level 4&gt;
{% endhighlight %}
produces...<br /><br />
<form mt:asset-id="217" class="mt-enclosure mt-enclosure-image" style="display: inline;" contenteditable="false"><img alt="headings.JPG" src="http://www.nearinfinity.com/blogs/headings.JPG" class="mt-image-none" style="" height="112" width="692" /></form><br /><br />

With TechBook you can create bulleted lists using "discs" or standard bullets.&nbsp;
Here's an example showing how to create a bulleted list using the disc bullets.&nbsp; (To create standard bullets replace "disc" with "bullet")
{% highlight text %}    .blist disc
    Line item 1 with disc
    .endblist
    .blist disc
    Line item 2 with disc
    .endblist
    .blist disc
    Line item 3 with disc
    .endblist
{% endhighlight %}
produces...<br /><br />
<form mt:asset-id="218" class="mt-enclosure mt-enclosure-image" style="display: inline;" contenteditable="false"><img alt="disc.JPG" src="http://www.nearinfinity.com/blogs/disc.JPG" class="mt-image-none" style="" height="71" width="190" /></form>


<p>
In addition to headings and lists, TechBook allows you to preformat text and identify code sections.&nbsp;&nbsp; E.g.
    </p>{% highlight text %}    .pre
           Pre line 1
           Pre line 2
    .endpre
    {% endhighlight %}

produces...<br /><br />
<form mt:asset-id="219" class="mt-enclosure mt-enclosure-image" style="display: inline;" contenteditable="false"><img alt="pre.JPG" src="http://www.nearinfinity.com/blogs/pre.JPG" class="mt-image-none" style="" height="51" width="115" /></form>&nbsp;<br /><br />
and
    {% highlight text %}    .code
    pdf = PDF::Writer.new
    pdf.select_font "Times-Roman"
    pdf.text "Hello Ruby", :font =&gt;14, :justification =&gt; :left
    pdf.save_as("e:/hello_ruby.pdf")
    .endcode
    {% endhighlight %}

produces...<br /><br />
<form mt:asset-id="220" class="mt-enclosure mt-enclosure-image" style="display: inline;" contenteditable="false"><img alt="code.jpg" src="http://www.nearinfinity.com/blogs/code.jpg" class="mt-image-none" style="" height="73" width="524" /></form>&nbsp;<br /><br />
After you've created your content using the TechBook markup, it's easy to create a new instance of the PDF::TechBook class
and produce the PDF file.  The following is an example, where "my_content" is your marked-up content<br /><br />
    {% highlight text %}    pdf = PDF::TechBook.new
    pdf.select_font "Times-Roman"
    pdf.techbook_parse <span style="color: blue;">my_content</span>
    pdf.save_as("c:/temp/hello_ruby.pdf")
    {% endhighlight %}


<p>
Download a sample program&nbsp;</p><form mt:asset-id="221" class="mt-enclosure mt-enclosure-file" style="display: inline;" contenteditable="false"><a href="http://www.nearinfinity.com/blogs/my_pdf_writer.rb">my_pdf_writer.rb</a></form><p>
</p>

<p>There are other features supported by TechBook such as table of contents and the eval directive, but hopefully this
    will give you a start to using TechBook.  If you view the raw version of the PDF::Writer manual that comes with gem you can get a good idea of
    what you can accomplish with PDF::Writer.  <br /><br />
    I'm interested in other solutions. Leave me a comment if you know of other ways and/or better ways to create PDF documents
    using Ruby or have additional tips using PDF::Writer.
</p><div><br /></div><div><br /></div><div><br /></div><div><br /></div> 
