--- 
permalink: /blogs/chris_rohr/becareful_with_groovys_optiona.html
layout: blogs
title: Be careful with Groovy's optional parens on method calls!
date: 2009-11-18 16:20:17 -05:00
tags: Groovy
---
<p>My current project (a web application) has a module that is almost entirely written in Groovy.&nbsp; <b>Note:</b> We are using the latest version 1.6.5 of Groovy.</p><p>In one of the methods we had some logic similar to the following:<br /><br /></p><code> def myMethodToProcessTheList(def listOfThings) {<br /></code><blockquote><code>if (listOfThings &amp;&amp; listOfThings.size &lt; 0) {<br />&nbsp;&nbsp;&nbsp; //Do my logic<br /></code><code>}<br /></code></blockquote><code>}</code><br /><br />When the above code is run using Java 5 everything works wonderfully.&nbsp; However when we pushed the code out to our server running Java 6 we got an interesting error stating that it couldn't compare java.util.ArrayList to java.lang.Integer.<br /><br />The problem is actually that the size method needs the parens after it (<b>Note:</b> The Groovy docs actually do state that methods with at least <u>ONE</u> param can omit the parens).&nbsp; I realize now that it would make sense that parameter-less methods would need parens because how else would Groovy distinguish between methods and property accessors?&nbsp; I did find one forum <a href="http://old.nabble.com/TestApp.groovy-pre-Grails-1.1-td22437010.html">post</a> that indicated that in Groovy, lists have special properties that act like the spread-dot operator.&nbsp; That is why the listOfThings.size returned the ArrayList instead of a number.<br /><br />So why does this work in Java 5 but not Java 6?&nbsp; That is a great question, one of which I really don't have a definitive answer.&nbsp; I'm not completely sure if this purely a Java 5/Java 6 difference or simply a difference between the IBM Java 5/Java 6 JVM.<br /><br />If anyone has a theory as to why it would work one way on Java 5 and the other in Java 6, I would love to hear it.<br /><code></code><blockquote><code></code></blockquote> 
